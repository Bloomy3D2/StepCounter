# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∫–ª—é—á–µ–π –ÆKassa

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

**User-Defined Settings –≤ `project.pbxproj`:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚ùå –ö–ª—é—á–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ git –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ
- ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Build Script + Config.local.xcconfig

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ö–ª—é—á–∏ **–ù–ï** –ø–æ–ø–∞–¥–∞—é—Ç –≤ git
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- ‚úÖ –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å

---

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å –∫–ª—é—á–∞–º–∏

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞:
   ```bash
   cp ChallengeApp/Config.local.xcconfig.example ChallengeApp/Config.local.xcconfig
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –≤ `Config.local.xcconfig`:
   ```xcconfig
   YOOKASSA_SHOP_ID = 1256365
   YOOKASSA_SECRET_KEY = test_3NzNw2knb5rTf-bMwRMfdACZdtpAmgmRVgdfW9FYToo
   YOOKASSA_TEST_MODE = YES
   ```

**–í–∞–∂–Ω–æ:** `Config.local.xcconfig` —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` - –æ–Ω –ù–ï –ø–æ–ø–∞–¥–µ—Ç –≤ git!

---

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ Build Script –≤ Xcode

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Xcode
2. –í—ã–±–µ—Ä–∏—Ç–µ Target **"ChallengeApp"**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Build Phases"**
4. –ù–∞–∂–º–∏—Ç–µ **"+"** ‚Üí **"New Run Script Phase"**
5. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ **–ü–û–°–õ–ï** "Copy Bundle Resources" (–≤–∞–∂–Ω–æ!)
6. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   "${SRCROOT}/scripts/copy-yookassa-keys.sh"
   ```
7. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞ **"Run script only when installing"** = **–ù–ï –í–ö–õ–Æ–ß–ï–ù–ê**

---

### –®–∞–≥ 3: –£–¥–∞–ª–∏—Ç–µ User-Defined Settings –∏–∑ project.pbxproj (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å –∫–ª—é—á–∏ –∏–∑ git:

1. –í Xcode: Target ‚Üí Build Settings
2. –ù–∞–π–¥–∏—Ç–µ User-Defined Settings:
   - `YOOKASSA_SHOP_ID`
   - `YOOKASSA_SECRET_KEY`
   - `YOOKASSA_TEST_MODE`
3. –£–¥–∞–ª–∏—Ç–µ –∏—Ö (–æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã)

**–ò–ª–∏** –æ—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ - Build Script –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö, –µ—Å–ª–∏ `Config.local.xcconfig` –Ω–µ –Ω–∞–π–¥–µ–Ω.

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (‚åò + B)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   üîë AppConfig: YooKassa Shop ID from Info.plist: 1256365
   üîë AppConfig: YooKassa Secret Key from Info.plist: test_3NzNw2knb5rTf-b...
   ```

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å User-Defined Settings

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Build Script:

1. –û—Å—Ç–∞–≤—å—Ç–µ User-Defined Settings –≤ `project.pbxproj`
2. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞:
   - –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa
   - –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç–µ `secretKey` (—Å—Ç–∞—Ä—ã–π —Å—Ç–∞–Ω–µ—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω)
   - –û–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á–∏ –≤ Build Settings

**–†–∏—Å–∫:** –ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—Ç–∞–Ω–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–º - –∫–ª—é—á–∏ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤—Å–µ–º.

---

## üìù –ß—Ç–æ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git?

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∫–æ–º–º–∏—Ç–∏—Ç—å:
- `scripts/copy-yookassa-keys.sh` - —Å–∫—Ä–∏–ø—Ç –±–µ–∑ –∫–ª—é—á–µ–π
- `Config.local.xcconfig.example` - –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞
- `Config.xcconfig.example` - –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞

### ‚ùå –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å:
- `Config.local.xcconfig` - —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (–≤ .gitignore)
- `Config.xcconfig` - —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (–≤ .gitignore)
- User-Defined Settings –≤ `project.pbxproj` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–±)

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Build Script + `Config.local.xcconfig`

**–î–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å User-Defined Settings, –Ω–æ –ª—É—á—à–µ –≤—Å–µ —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Build Script –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
