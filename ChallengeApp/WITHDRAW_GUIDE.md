# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—ã–≤–æ–¥—É —Å—Ä–µ–¥—Å—Ç–≤

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### 1. –≠–∫—Ä–∞–Ω –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ (`WithdrawView`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —Å—É–º–º—ã (50, 100, 200, 500, 1000 ‚Ç¨ –∏–ª–∏ "–í—Å–µ")
- –†—É—á–Ω–æ–π –≤–≤–æ–¥ —Å—É–º–º—ã
- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –≤—ã–≤–æ–¥–∞:
  - **–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞** - –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã (16 —Ü–∏—Ñ—Ä)
  - **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç** - –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Å—á–µ—Ç–∞ (20 —Ü–∏—Ñ—Ä)
  - **–°–ë–ü** - –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞: 10 ‚Ç¨

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase
- –ú–µ—Ç–æ–¥ `withdrawBalance` –≤ `SupabaseManager`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –≤—ã–≤–æ–¥–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `payments` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã (–º–∏–Ω–∏–º—É–º 10 ‚Ç¨)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ø–æ—Å–æ–±–∞ –≤—ã–≤–æ–¥–∞)

---

## üìã –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤

### –®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω –≤—ã–≤–æ–¥–∞
- –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤" –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- –í–∏–¥–∏—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å

### –®–∞–≥ 2: –í—ã–±–æ—Ä —Å—É–º–º—ã
- –í—ã–±–∏—Ä–∞–µ—Ç –∏–∑ –±—ã—Å—Ç—Ä—ã—Ö —Å—É–º–º –∏–ª–∏ –≤–≤–æ–¥–∏—Ç –≤—Ä—É—á–Ω—É—é
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å—É–º–º–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –±–∞–ª–∞–Ω—Å
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—É–º–º—É (10 ‚Ç¨)

### –®–∞–≥ 3: –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –≤—ã–≤–æ–¥–∞
- **–ö–∞—Ä—Ç–∞**: –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã (–∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- **–°—á–µ—Ç**: –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞ (20 —Ü–∏—Ñ—Ä)
- **–°–ë–ü**: –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### –®–∞–≥ 4: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ù–∞–∂–∏–º–∞–µ—Ç "–í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞"
- –°–∏—Å—Ç–µ–º–∞:
  1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
  2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤
  3. –°–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É–º–º—É —Å –±–∞–ª–∞–Ω—Å–∞
  4. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `payments` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PENDING`
  5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

### –®–∞–≥ 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ (–≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ –≤ —Ç–∞–±–ª–∏—Ü–µ `payments`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—É—é –∑–∞—è–≤–∫—É –≤—Ä—É—á–Ω—É—é
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `COMPLETED` –ø–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `payments`
```sql
- id: UUID (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- user_id: UUID (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- challenge_id: BIGINT (NULL –¥–ª—è –≤—ã–≤–æ–¥–∞)
- type: TEXT ('WITHDRAWAL')
- status: TEXT ('PENDING' ‚Üí 'COMPLETED')
- amount: DECIMAL (—Å—É–º–º–∞ –≤—ã–≤–æ–¥–∞)
- description: TEXT (—Ä–µ–∫–≤–∏–∑–∏—Ç—ã: "–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –ö–∞—Ä—Ç–∞: 0000 0000 0000 0000")
- transaction_id: TEXT (UUID)
- created_at: TIMESTAMP
- processed_at: TIMESTAMP (NULL –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏)
```

---

## üîß –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–≤–æ–¥–æ–≤
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –í—ã–≤–æ–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

**–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º —à–ª—é–∑–æ–º (–ÆKassa, Stripe, –∏ —Ç.–¥.)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞—Ä—Ç—É/—Å—á–µ—Ç —á–µ—Ä–µ–∑ API
- Webhook –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

### 2. –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –≤—ã–≤–æ–¥
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ö–æ–º–∏—Å—Å–∏—è –Ω–µ –≤–∑–∏–º–∞–µ—Ç—Å—è

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```swift
let commission = amount * 0.02 // 2% –∫–æ–º–∏—Å—Å–∏—è
let finalAmount = amount - commission
```

### 3. –õ–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–≤–æ–¥
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ú–∏–Ω–∏–º—É–º 10 ‚Ç¨, –º–∞–∫—Å–∏–º—É–º = –±–∞–ª–∞–Ω—Å

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞ —Ä–∞–∑: 10,000 ‚Ç¨
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤ –¥–µ–Ω—å: 50,000 ‚Ç¨
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–≤–æ–¥–æ–≤ –≤ –¥–µ–Ω—å: 5

### 4. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—É–º–º
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –î–ª—è —Å—É–º–º > 1,000 ‚Ç¨ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–∞—Å–ø–æ—Ä—Ç, –∏ —Ç.–¥.)
- –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### 5. –ò—Å—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–æ–≤
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ó–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `payments`

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–≤–æ–¥–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (PENDING, COMPLETED, FAILED)
- –î–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ –≤—ã–≤–æ–¥–∞

---

## üì± UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Å—Ä–∞–∑—É –ø—Ä–∏ –≤–≤–æ–¥–µ
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫—É "–í—ã–≤–µ—Å—Ç–∏" –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ

### –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–µ–ª—ã (0000 0000 0000 0000)
- –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞: —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, –º–∞–∫—Å–∏–º—É–º 20
- –¢–µ–ª–µ—Ñ–æ–Ω: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞—Å–∫–µ

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- "–°—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ—Å—Ç—É–ø—è—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π"
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –í—ã–≤–æ–¥ —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º
1. –ë–∞–ª–∞–Ω—Å: 100 ‚Ç¨
2. –í—ã–≤–æ–¥: 50 ‚Ç¨
3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—Ö, –±–∞–ª–∞–Ω—Å = 50 ‚Ç¨

### –¢–µ—Å—Ç 2: –í—ã–≤–æ–¥ —Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º
1. –ë–∞–ª–∞–Ω—Å: 50 ‚Ç¨
2. –í—ã–≤–æ–¥: 100 ‚Ç¨
3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞ "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤"

### –¢–µ—Å—Ç 3: –í—ã–≤–æ–¥ –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞
1. –ë–∞–ª–∞–Ω—Å: 100 ‚Ç¨
2. –í—ã–≤–æ–¥: 5 ‚Ç¨
3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞ "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: 10 ‚Ç¨"

### –¢–µ—Å—Ç 4: –í—ã–≤–æ–¥ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
1. –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–≤–æ–¥–∞
3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –û—à–∏–±–∫–∞ "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"

---

## ‚úÖ –ò—Ç–æ–≥

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –¢—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –≤—ã–≤–æ–¥–∞ (–∫–∞—Ä—Ç–∞, —Å—á–µ—Ç, –°–ë–ü)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –æ –≤—ã–≤–æ–¥–µ

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ:**
- ‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑
- ‚ö†Ô∏è –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –≤—ã–≤–æ–¥
- ‚ö†Ô∏è –õ–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–≤–æ–¥
- ‚ö†Ô∏è –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—É–º–º
- ‚ö†Ô∏è –≠–∫—Ä–∞–Ω –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–≤–æ–¥–æ–≤
