# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ **–£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ `INFOPLIST_KEY_*` –∏–∑ `project.pbxproj`**
   - –¢–µ–ø–µ—Ä—å –∑–Ω–∞—á–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –¢–û–õ–¨–ö–û –∏–∑ `.xcconfig` —Ñ–∞–π–ª–æ–≤

2. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã `.xcconfig` —Ñ–∞–π–ª—ã**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä—è–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
   - `Config.xcconfig` (Debug) ‚Üí —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏
   - `Config.Release.xcconfig` (Release) ‚Üí –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–ª—é—á–∏

3. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω Build Script**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ `Info.plist` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `GENERATE_INFOPLIST_FILE = YES`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PROCESSED_INFOPLIST_PATH` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É—Ç–∏

4. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω Build Script Phase –≤ –ø—Ä–æ–µ–∫—Ç**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ
   - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω –ü–û–°–õ–ï "Copy Bundle Resources"
   - –°–∫—Ä–∏–ø—Ç —Å–¥–µ–ª–∞–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –®–∞–≥ 1: Clean Build Folder

–í Xcode:
- **Product** ‚Üí **Clean Build Folder** (‚áß‚åòK)

### –®–∞–≥ 2: Build

- **Product** ‚Üí **Build** (‚åòB)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

–í Xcode –æ—Ç–∫—Ä–æ–π—Ç–µ **Report Navigator** (‚åò + 9) –∏ –Ω–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–±–æ—Ä–∫—É. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîß Configuration: Debug
üìÑ Using PROCESSED_INFOPLIST_PATH: ...
üîë Copying YooKassa keys to Info.plist...
   Shop ID: 1256365
   Mode: test
   Secret Key: test_3NzNw2knb5rTf-b...
‚úÖ YooKassa keys copied successfully to Info.plist
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- **Product** ‚Üí **Run** (‚åòR)

–í –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîç AppConfig: Found YOOKASSA_SHOP_ID in Info.plist: 1256365
üîë AppConfig: YooKassa Shop ID from Info.plist: 1256365
üîë AppConfig: YooKassa Secret Key from Info.plist: test_3NzNw2knb5rTf-b...
üîë AppConfig: YooKassa Test Mode from Info.plist (Bool): true
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚ö†Ô∏è AppConfig: YOOKASSA_SHOP_ID NOT found in Info.plist
‚ö†Ô∏è AppConfig: YooKassa Shop ID not found, using default
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Xcode

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Build Script Phase

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Xcode
2. Target "ChallengeApp" ‚Üí **Build Phases**
3. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω **"Run Script: Inject YooKassa Keys"**
4. –û–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω **–ü–û–°–õ–ï** "Copy Bundle Resources"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Build Settings

1. Target "ChallengeApp" ‚Üí **Build Settings**
2. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ: `YOOKASSA_SHOP_ID`
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `1256365` –¥–ª—è Debug —Å—Ö–µ–º—ã

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Build Script –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è?

–í –ª–æ–≥–∞—Ö —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
üîß Configuration: Debug
```

–ï—Å–ª–∏ –µ–µ –Ω–µ—Ç ‚Üí Build Script –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- Build Script Phase –¥–æ–±–∞–≤–ª–µ–Ω –≤ Build Phases?
- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π? (`chmod +x scripts/copy-yookassa-keys.sh`)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ö–ª—é—á–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ Build Settings?

–í –ª–æ–≥–∞—Ö —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîë Copying YooKassa keys to Info.plist...
   Shop ID: 1256365
```

–ï—Å–ª–∏ `Shop ID:` –ø—É—Å—Ç–æ–π ‚Üí –∫–ª—é—á–∏ –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `.xcconfig`. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- `.xcconfig` —Ñ–∞–π–ª—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã? (Debug ‚Üí Config.xcconfig)
- –ó–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤ `.xcconfig` —Ñ–∞–π–ª–∞—Ö?

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Info.plist –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è?

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π `Info.plist` –≤ `.app` bundle:
1. –ù–∞–π–¥–∏—Ç–µ `.app` —Ñ–∞–π–ª –≤ DerivedData
2. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "Show Package Contents"
3. –û—Ç–∫—Ä–æ–π—Ç–µ `Info.plist`
4. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–ª—é—á–∏: `YOOKASSA_SHOP_ID`, `YOOKASSA_SECRET_KEY`, `YOOKASSA_TEST_MODE`

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–í—Å–µ –∫–ª—é—á–∏ –∑–∞—â–∏—â–µ–Ω—ã:** `.xcconfig` —Ñ–∞–π–ª—ã –≤ `.gitignore` - –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ git
- **–†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:** Build Script –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ
- **–ì–æ—Ç–æ–≤–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –†–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è Debug/Release

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –ö–ª—é—á–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `Info.plist` –≤ runtime
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (–Ω–µ—Ç –æ—à–∏–±–∫–∏ 401)
- ‚úÖ –†–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è Debug/Release
- ‚úÖ –ö–ª—é—á–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ git
