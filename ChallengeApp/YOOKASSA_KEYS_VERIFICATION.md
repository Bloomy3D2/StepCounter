# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª—é—á–µ–π YooKassa

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —è–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ `INFOPLIST_KEY_YOOKASSA_*` –≤ build settings –¥–ª—è Debug –∏ Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
2. ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.xcconfig` —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `$(VARIABLE_NAME)`

## –®–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.xcconfig` —Ñ–∞–π–ª—ã –ù–ï –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ —Ä–µ—Å—É—Ä—Å—ã

**–í Xcode:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç `ChallengeApp.xcodeproj`
2. –í—ã–±–µ—Ä–∏—Ç–µ target `ChallengeApp`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Build Phases**
4. –†–∞—Å–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ü–∏—é **Copy Bundle Resources**
5. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `Config.xcconfig` –∏ `Config.Release.xcconfig` –ù–ï –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —ç—Ç–æ–º —Å–ø–∏—Å–∫–µ**
6. –ï—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å ‚Äî —É–¥–∞–ª–∏—Ç–µ –∏—Ö (–≤—ã–±–µ—Ä–∏—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ `-`)

### 2. –û—á–∏—Å—Ç–∏—Ç–µ build folder

**–í Xcode:**
- `Product` ‚Üí `Clean Build Folder` (–∏–ª–∏ `‚áß‚åòK`)

### 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

**–í Xcode:**
- `Product` ‚Üí `Build` (–∏–ª–∏ `‚åòB`)

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

**‚úÖ –£—Å–ø–µ—à–Ω—ã–π —Å–ª—É—á–∞–π:**
```
üîç AppConfig: All Info.plist keys: ..., YOOKASSA_SHOP_ID, YOOKASSA_SECRET_KEY, YOOKASSA_TEST_MODE, ...
üîç AppConfig: Found YOOKASSA_SHOP_ID in Info.plist: 1256365
üîë AppConfig: YooKassa Shop ID from Info.plist: 1256365
üîë AppConfig: YooKassa Secret Key from Info.plist: test_3NzNw2knb5rTf...
```

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞ (–µ—Å–ª–∏ –≤—Å–µ –µ—â–µ –≤–∏–¥–∏—Ç–µ):**
```
üîç AppConfig: YOOKASSA_SHOP_ID NOT found in Info.plist
‚ö†Ô∏è AppConfig: YooKassa Shop ID not found, using default
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Build Settings –≤—Ä—É—á–Ω—É—é

**–í Xcode:**
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `ChallengeApp` –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ target `ChallengeApp`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Build Settings**
4. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ `INFOPLIST_KEY_YOOKASSA`
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è Debug –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–∏–¥–Ω—ã:
   - `INFOPLIST_KEY_YOOKASSA_SHOP_ID = $(YOOKASSA_SHOP_ID)`
   - `INFOPLIST_KEY_YOOKASSA_SECRET_KEY = $(YOOKASSA_SECRET_KEY)`
   - `INFOPLIST_KEY_YOOKASSA_TEST_MODE = $(YOOKASSA_TEST_MODE)`
6. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `.xcconfig`

**–í Xcode Build Settings:**
1. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ `YOOKASSA_SHOP_ID` (–±–µ–∑ `INFOPLIST_KEY_`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è Debug –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–µ = `1256365`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª—è Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–µ = `1254934`

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ Info.plist:

```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å –∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É Info.plist –≤ DerivedData
# –û–±—ã—á–Ω–æ —ç—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# ~/Library/Developer/Xcode/DerivedData/ChallengeApp-*/Build/Products/Debug-iphonesimulator/ChallengeApp.app/Info.plist

# –ó–∞—Ç–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
plutil -p /path/to/Info.plist | grep YOOKASSA
```

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç)

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ –µ—â–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

1. –í Xcode: `Product` ‚Üí `Scheme` ‚Üí `Edit Scheme...`
2. –í—ã–±–µ—Ä–∏—Ç–µ `Run` ‚Üí `Arguments`
3. –í `Environment Variables` –¥–æ–±–∞–≤—å—Ç–µ:
   - `YOOKASSA_SHOP_ID` = `1256365` (–¥–ª—è Debug) –∏–ª–∏ `1254934` (–¥–ª—è Release)
   - `YOOKASSA_SECRET_KEY` = `test_3NzNw2knb5rTf-bMwRMfdACZdtpAmgmRVgdfW9FYToo` (–¥–ª—è Debug) –∏–ª–∏ `live_qSdkVXs_uFx88lkZzzyX0DkK-iparwPb6Jm4lM7ArXM` (–¥–ª—è Release)
   - `YOOKASSA_TEST_MODE` = `YES` (–¥–ª—è Debug) –∏–ª–∏ `NO` (–¥–ª—è Release)

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.xcconfig` —Ñ–∞–π–ª—ã.

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ –ö–ª—é—á–∏ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `Info.plist` (–∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ `.xcconfig`)
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–ª—é—á–µ–π
- ‚úÖ –ü–ª–∞—Ç–µ–∂–∏ YooKassa —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–∫–∏ 401
- ‚úÖ –ö–ª—é—á–∏ –ù–ï –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git (–±–ª–∞–≥–æ–¥–∞—Ä—è `.gitignore`)
