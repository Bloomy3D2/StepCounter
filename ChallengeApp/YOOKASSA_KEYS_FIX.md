# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª—é—á–∞–º–∏ YooKassa

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–ª—é—á–∏ YooKassa –Ω–µ —á–∏—Ç–∞–ª–∏—Å—å –∏–∑ `Info.plist`, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—à–∏–±–∫–µ 401 "Incorrect password format".

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—É—Ç–∏ –∫ `.xcconfig` —Ñ–∞–π–ª–∞–º**
   - –§–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `ChallengeApp/ChallengeApp/Config.xcconfig` –∏ `ChallengeApp/ChallengeApp/Config.Release.xcconfig`
   - –ü—É—Ç–∏ –≤ `project.pbxproj` –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `Config.xcconfig` –∏ `Config.Release.xcconfig` (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —è–∫–æ—Ä—è `ChallengeApp`)

2. **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–ª—é—á–µ–π –≤ `project.pbxproj`**
   - –ö–ª—é—á–∏ –Ω–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç (–±–µ–∑–æ–ø–∞—Å–Ω–æ)

3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –í Debug —Ä–µ–∂–∏–º–µ `AppConfig.swift` —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥–∏—Ç –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ `Info.plist` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à —Å–±–æ—Ä–∫–∏ Xcode
```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd ChallengeApp
rm -rf ~/Library/Developer/Xcode/DerivedData/ChallengeApp-*
```

–ò–ª–∏ –≤ Xcode:
- Product ‚Üí Clean Build Folder (‚áß‚åòK)
- –ó–∞–∫—Ä—ã—Ç—å –∏ –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç—å Xcode

### 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
- –í Xcode: Product ‚Üí Build (‚åòB)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è **Debug** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `üîç AppConfig: All Info.plist keys: ...`
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `üîë AppConfig: YooKassa Shop ID from Info.plist: 1256365` (–¥–ª—è Debug)
- –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `‚ö†Ô∏è AppConfig: YooKassa Shop ID not found, using default` - –∑–Ω–∞—á–∏—Ç `.xcconfig` —Ñ–∞–π–ª—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### 4. –ï—Å–ª–∏ –∫–ª—é—á–∏ –≤—Å—ë –µ—â—ë –Ω–µ —á–∏—Ç–∞—é—Ç—Å—è

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Build Settings –≤—Ä—É—á–Ω—É—é
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Xcode
2. –í—ã–±–µ—Ä–∏—Ç–µ target `ChallengeApp`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Build Settings**
4. –ù–∞–π–¥–∏—Ç–µ `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –≤ –ø–æ–∏—Å–∫–µ
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑ `.xcconfig`)

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Info.plist
–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `Info.plist`:
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å –∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –≤ DerivedData
# –û–±—ã—á–Ω–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# ~/Library/Developer/Xcode/DerivedData/ChallengeApp-*/Build/Products/Debug-iphoneos/ChallengeApp.app/Info.plist

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–π:
plutil -p ~/Library/Developer/Xcode/DerivedData/ChallengeApp-*/Build/Products/Debug-iphoneos/ChallengeApp.app/Info.plist | grep YOOKASSA
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã:
- `YOOKASSA_SHOP_ID = 1256365` (–¥–ª—è Debug)
- `YOOKASSA_SECRET_KEY = test_3NzNw2knb5rTf-bMwRMfdACZdtpAmgmRVgdfW9FYToo` (–¥–ª—è Debug)

#### –í–∞—Ä–∏–∞–Ω—Ç C: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Xcode:
1. Edit Scheme ‚Üí Run ‚Üí Arguments ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å—Ç–µ:
   - `YOOKASSA_SHOP_ID` = `1256365`
   - `YOOKASSA_SECRET_KEY` = `test_3NzNw2knb5rTf-bMwRMfdACZdtpAmgmRVgdfW9FYToo`
   - `YOOKASSA_TEST_MODE` = `YES`

## –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
ChallengeApp/
‚îú‚îÄ‚îÄ ChallengeApp/
‚îÇ   ‚îú‚îÄ‚îÄ Config.xcconfig          # Debug –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏)
‚îÇ   ‚îú‚îÄ‚îÄ Config.Release.xcconfig   # Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–ª—é—á–∏)
‚îÇ   ‚îî‚îÄ‚îÄ Utils/
‚îÇ       ‚îî‚îÄ‚îÄ AppConfig.swift       # –ß–∏—Ç–∞–µ—Ç –∫–ª—é—á–∏ –∏–∑ Info.plist
‚îî‚îÄ‚îÄ ChallengeApp.xcodeproj/
    ‚îî‚îÄ‚îÄ project.pbxproj           # –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ .xcconfig —Ñ–∞–π–ª—ã
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ –ö–ª—é—á–∏ **–ù–ï** –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ `project.pbxproj`  
‚úÖ `.xcconfig` —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`  
‚úÖ –ö–ª—é—á–∏ —á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ `.xcconfig` ‚Üí `Info.plist` ‚Üí `Bundle.main`

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ Clean Build
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Build Settings –≤—Ä—É—á–Ω—É—é (–í–∞—Ä–∏–∞–Ω—Ç A)
