# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –ø–µ—Ä–≤–æ–º —ç–∫—Ä–∞–Ω–µ (SplashView) –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
‚ùå Anonymous sign-ins are disabled
‚ùå No fallback user available
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é —Å–µ—Å—Å–∏—é, –Ω–æ –æ–Ω–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ Supabase. –ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–ª–æ –Ω–∞ —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `autoSignIn()` –≤ `ChallengeAppApp.swift`

**–ë—ã–ª–æ:**
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ—Å—Å–∏–∏ –ø—ã—Ç–∞–ª—Å—è —Å–æ–∑–¥–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é —Å–µ—Å—Å–∏—é
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ UserDefaults
- –ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç - –æ—à–∏–±–∫–∞

**–°—Ç–∞–ª–æ:**
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `isAuthenticated = false`
- –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `isAuthenticated = false`
- –ù–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—É—é —Å–µ—Å—Å–∏—é
- –õ–æ–≥–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤—Ä—É—á–Ω—É—é

### 2. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ `RootView`

**–ë—ã–ª–æ:**
- `showSplash` ‚Üí `showQuickStart` ‚Üí `MainTabView`
- –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª `isAuthenticated` –¥–ª—è –ø–æ–∫–∞–∑–∞ `AuthView`

**–°—Ç–∞–ª–æ:**
- `showSplash` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ `isAuthenticated`
  - –ï—Å–ª–∏ `false` ‚Üí `AuthView`
  - –ï—Å–ª–∏ `true` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π ‚Üí `showQuickStart` –∏–ª–∏ `MainTabView`

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ `AuthView`:
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `appState.setUser(user)`, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `isAuthenticated = true`
- `RootView` –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ `isAuthenticated` —á–µ—Ä–µ–∑ `.onChange`
- –ü—Ä–∏ `isAuthenticated = true` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `checkActiveChallenges()`

---

## üîÑ –ù–æ–≤—ã–π flow

1. **SplashView** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å"
2. **autoSignIn()** ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Å—Å–∏—é
   - –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí `isAuthenticated = true`
   - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí `isAuthenticated = false`
3. **RootView** ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `isAuthenticated`
   - –ï—Å–ª–∏ `false` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **AuthView**
   - –ï—Å–ª–∏ `true` ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏
4. **AuthView** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç/—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞ ‚Üí `appState.setUser(user)` ‚Üí `isAuthenticated = true`
5. **RootView** ‚Üí –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ `isAuthenticated`
   - –ü—Ä–∏ `true` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `checkActiveChallenges()`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `QuickStartView` –∏–ª–∏ `MainTabView`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ—Å—Å–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Email/Password –∏–ª–∏ Apple Sign In

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ê–Ω–æ–Ω–∏–º–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ Supabase (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è production)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —è–≤–Ω–æ –≤–æ–π—Ç–∏ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ UserDefaults –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
