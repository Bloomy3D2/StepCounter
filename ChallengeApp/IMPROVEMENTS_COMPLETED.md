# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (30 –º–∏–Ω—É—Ç)

**–°–æ–∑–¥–∞–Ω:** `Utils/AppConfig.swift`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í—Å–µ –∫–ª—é—á–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `AppConfig`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `Info.plist`
- ‚úÖ Fallback –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã `SupabaseManager` –∏ `YooKassaClient`

**–§–∞–π–ª—ã:**
- `AppConfig.swift` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `SupabaseManager.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppConfig.supabaseURL` –∏ `AppConfig.supabaseKey`
- `YooKassaClient.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppConfig.yooKassaShopId` –∏ `AppConfig.yooKassaSecretKey`
- `PaymentManager.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppConfig.paymentReturnURL`
- `ChallengeAppApp.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppConfig.appURLScheme`

---

### 2. ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (1 —á–∞—Å)

**–°–æ–∑–¥–∞–Ω:** `Utils/Logger.swift`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω `Logger` –∫–ª–∞—Å—Å —Å —É—Ä–æ–≤–Ω—è–º–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `OSLog` –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –£–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `debug()`, `info()`, `warning()`, `error()`, `critical()`
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `networkRequest()`, `networkResponse()`, `payment()`, `auth()`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `print()` –Ω–∞ `Logger.shared.*()` (52 –º–µ—Å—Ç–∞)

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `SupabaseManager.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `PaymentManager.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `ChallengeManager.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `ChallengeAppApp.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `PaymentView.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `ChallengeDetailView.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã
- `ActiveChallengeView.swift` - –≤—Å–µ `print()` –∑–∞–º–µ–Ω–µ–Ω—ã

---

### 3. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (1-2 —á–∞—Å–∞)

**–°–æ–∑–¥–∞–Ω:** `Utils/AppError.swift`

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω `AppError` enum —Å —Ç–∏–ø–∞–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `ErrorHandler` –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é (`recoverySuggestion`)
- ‚úÖ –ú–µ—Ç–æ–¥—ã `isCritical` –∏ `isRetryable`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö –∏ Views

**–¢–∏–ø—ã –æ—à–∏–±–æ–∫:**
- Network: `networkError`, `networkTimeout`, `networkUnavailable`
- Authentication: `authenticationRequired`, `invalidCredentials`, `emailNotConfirmed`
- Payment: `paymentFailed`, `paymentCancelled`, `refundFailed`
- Challenge: `challengeNotFound`, `alreadyJoined`, `challengeNotActive`
- –ò –¥—Ä—É–≥–∏–µ...

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `SupabaseManager.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppError` –∏ `ErrorHandler`
- `PaymentView.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ErrorHandler.handle()` –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- `AuthView.swift` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ErrorHandler.userFriendlyMessage()`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 3
  - `AppConfig.swift` (100+ —Å—Ç—Ä–æ–∫)
  - `Logger.swift` (120+ —Å—Ç—Ä–æ–∫)
  - `AppError.swift` (250+ —Å—Ç—Ä–æ–∫)

- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 10+
  - –í—Å–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
  - –í—Å–µ Views —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
  - `ChallengeAppApp.swift`

- **–ó–∞–º–µ–Ω–µ–Ω–æ `print()`:** 52 –º–µ—Å—Ç–∞ ‚Üí `Logger.shared.*()`
- **–ó–∞–º–µ–Ω–µ–Ω–æ `NSError`:** 15+ –º–µ—Å—Ç ‚Üí `AppError`
- **–ó–∞–º–µ–Ω–µ–Ω–æ hardcoded –∑–Ω–∞—á–µ–Ω–∏–π:** 5+ –º–µ—Å—Ç ‚Üí `AppConfig`

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –ö–ª—é—á–∏ –Ω–µ –≤ –∫–æ–¥–µ (–º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ `Info.plist`)
- ‚úÖ –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è (dev/staging/prod)

### –û—Ç–ª–∞–¥–∫–∞:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug, info, warning, error, critical)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ª–æ–≥–æ–º iOS
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Sentry/Firebase

### UX:
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## üìù –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –°–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

1. **Dependency Injection** (3-4 —á–∞—Å–∞)
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
   - –°–æ–∑–¥–∞—Ç—å DI Container
   - –ò–Ω–∂–µ–∫—Ç–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (2-3 —á–∞—Å–∞)
   - –°–æ–∑–¥–∞—Ç—å `CacheManager`
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—å
   - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

3. **Retry –ª–æ–≥–∏–∫–∞** (1-2 —á–∞—Å–∞)
   - –°–æ–∑–¥–∞—Ç—å `NetworkRetry`
   - –î–æ–±–∞–≤–∏—Ç—å retry –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

---

## üéâ –ò—Ç–æ–≥

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!**

–ö–æ–¥ —Å—Ç–∞–ª:
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞)
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏)
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 —á–∞—Å–∞

---

**–ì–æ—Ç–æ–≤–æ!** üöÄ
