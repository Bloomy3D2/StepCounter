# ‚ö° –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Build Script –¥–ª—è –∫–ª—é—á–µ–π YooKassa

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. ‚úÖ –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω: `scripts/copy-yookassa-keys.sh`
2. ‚úÖ –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `GENERATE_INFOPLIST_FILE = YES`
3. ‚úÖ `.xcconfig` —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üîß –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Build Script —á–µ—Ä–µ–∑ Xcode (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Xcode

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ Run Script Phase

1. –í—ã–±–µ—Ä–∏—Ç–µ **Target "ChallengeApp"** –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Build Phases"**
3. –ù–∞–∂–º–∏—Ç–µ **"+"** –≤–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ **"New Run Script Phase"**

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∫—Ä–∏–ø—Ç

1. **–†–∞—Å–∫—Ä–æ–π—Ç–µ** –Ω–æ–≤—ã–π "Run Script" (–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É —Å–ª–µ–≤–∞)
2. –í –ø–æ–ª–µ **"Shell"** –æ—Å—Ç–∞–≤—å—Ç–µ `/bin/sh`
3. –í –ø–æ–ª–µ **"Script"** –≤—Å—Ç–∞–≤—å—Ç–µ:
   ```bash
   "${SRCROOT}/ChallengeApp/scripts/copy-yookassa-keys.sh"
   ```
4. **–í–ê–ñ–ù–û:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≥–∞–ª–æ—á–∫–∞ **"Run script only when installing"** = **–ù–ï –í–ö–õ–Æ–ß–ï–ù–ê** (—Å–Ω—è—Ç–∞)

### –®–∞–≥ 4: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

1. –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è **–ü–û–°–õ–ï** "Copy Bundle Resources"
2. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ "Run Script" —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª **–ü–û–°–õ–ï** "Resources" phase

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

–ù–∞–∂–º–∏—Ç–µ **‚åò + S**

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### 1. Clean Build Folder
**Product** ‚Üí **Clean Build Folder** (‚áß‚åòK)

### 2. Build
**Product** ‚Üí **Build** (‚åòB)

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

–í Xcode –æ—Ç–∫—Ä–æ–π—Ç–µ **Report Navigator** (‚åò + 9) –∏ –Ω–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–±–æ—Ä–∫—É. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üîß Configuration: Debug
üìÑ Using PROCESSED_INFOPLIST_PATH: ...
üîë Copying YooKassa keys to Info.plist...
   Shop ID: 1256365
   Mode: test
   Secret Key: test_3NzNw2knb5rTf-b...
‚úÖ YooKassa keys copied successfully to Info.plist
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîç AppConfig: Found YOOKASSA_SHOP_ID in Info.plist: 1256365
üîë AppConfig: YooKassa Shop ID from Info.plist: 1256365
```

---

## ‚ö†Ô∏è –ï—Å–ª–∏ Build Script –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Build Script —á–µ—Ä–µ–∑ Xcode –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü—É—Ç—å –∫ —Å–∫—Ä–∏–ø—Ç—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"${SRCROOT}/ChallengeApp/scripts/copy-yookassa-keys.sh"`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ —ç—Ç–æ–º—É –ø—É—Ç–∏

2. **–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π?**
   ```bash
   chmod +x ChallengeApp/scripts/copy-yookassa-keys.sh
   ```

3. **–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Info.plist?**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Run Script Phase –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–ü–û–°–õ–ï** "Copy Bundle Resources"

4. **–ö–ª—é—á–∏ –µ—Å—Ç—å –≤ Build Settings?**
   - Build Settings ‚Üí –ø–æ–∏—Å–∫ `YOOKASSA_SHOP_ID`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `1256365` –¥–ª—è Debug
