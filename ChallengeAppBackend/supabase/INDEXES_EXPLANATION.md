# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ –±–∞–∑–æ–≤–æ–π —Å—Ö–µ–º–µ

## ‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ä–∞–∑—É

–Ø –¥–æ–±–∞–≤–∏–ª –≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑–æ–≤—É—é —Å—Ö–µ–º—É. –û–Ω–∏ –Ω–µ –∑–∞–º–µ–¥–ª—è—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ —Å—Ç–∞—Ä—Ç–µ, –Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —Ä–æ—Å—Ç–µ.

---

## üìä –ò–Ω–¥–µ–∫—Å—ã –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º

### 1. Users (2 –∏–Ω–¥–µ–∫—Å–∞)

```sql
idx_users_email              -- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
idx_users_created_at         -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```

**–ó–∞—á–µ–º:** –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø—Ä–∏ –≤—Ö–æ–¥–µ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

### 2. Challenges (3 –∏–Ω–¥–µ–∫—Å–∞)

```sql
idx_challenges_active                    -- –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏ (WHERE is_active = true)
idx_challenges_start_end_date  -- –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º —Å—Ç–∞—Ä—Ç–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è
idx_challenges_created_at               -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
```

**–ó–∞—á–µ–º:** –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º.

---

### 3. User Challenges (7 –∏–Ω–¥–µ–∫—Å–æ–≤) - –°–ê–ú–ê–Ø –í–ê–ñ–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê

```sql
idx_user_challenges_user_id                    -- –ü–æ–∏—Å–∫ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
idx_user_challenges_challenge_id               -- –ü–æ–∏—Å–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ–ª–ª–µ–Ω–¥–∂–∞
idx_user_challenges_active                     -- –ê–∫—Ç–∏–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
idx_user_challenges_user_active_completed      -- –°–æ—Å—Ç–∞–≤–Ω–æ–π: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + –∞–∫—Ç–∏–≤–Ω—ã–µ + —Å—Ç–∞—Ç—É—Å
idx_user_challenges_stats                      -- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ/–ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ)
idx_user_challenges_challenge_active           -- –ê–∫—Ç–∏–≤–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–µ–ª–ª–µ–Ω–¥–∂–∞
idx_user_challenges_entry_date                 -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è
```

**–ó–∞—á–µ–º:** 
- –°–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã: "–º–æ–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏", "—É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–µ–ª–ª–µ–Ω–¥–∂–∞"
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –≠—Ç–∏ –∏–Ω–¥–µ–∫—Å—ã —É—Å–∫–æ—Ä—è—Ç —Ä–∞–±–æ—Ç—É –≤ 10-100 —Ä–∞–∑ –ø—Ä–∏ —Ä–æ—Å—Ç–µ

---

### 4. Completed Days (3 –∏–Ω–¥–µ–∫—Å–∞)

```sql
idx_completed_days_user_challenge       -- –ü–æ–∏—Å–∫ –ø–æ user_challenge_id
idx_completed_days_date                 -- –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–µ
idx_completed_days_challenge_date       -- –°–æ—Å—Ç–∞–≤–Ω–æ–π: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–Ω—è
```

**–ó–∞—á–µ–º:** 
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `has_completed_today()`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π

---

### 5. Payments (5 –∏–Ω–¥–µ–∫—Å–æ–≤)

```sql
idx_payments_user_id           -- –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
idx_payments_status            -- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
idx_payments_created_at        -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
idx_payments_user_created      -- –°–æ—Å—Ç–∞–≤–Ω–æ–π: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å + –¥–∞—Ç–∞ (–¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏)
idx_payments_type              -- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (ENTRY_FEE, PAYOUT, etc)
idx_payments_challenge_id      -- –ü–ª–∞—Ç–µ–∂–∏ –ø–æ —á–µ–ª–ª–µ–Ω–¥–∂—É
```

**–ó–∞—á–µ–º:** 
- –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π - —á–∞—Å—Ç—ã–π –∑–∞–ø—Ä–æ—Å
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º

---

### 6. Challenge Rules (2 –∏–Ω–¥–µ–∫—Å–∞)

```sql
idx_challenge_rules_challenge_id    -- –ü—Ä–∞–≤–∏–ª–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞
idx_challenge_rules_order           -- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª
```

**–ó–∞—á–µ–º:** –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞.

---

## ‚ö° –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤:
- –ü–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **500-2000ms** (–ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–Ω—è: **100-500ms**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: **1000-5000ms**

### –° –∏–Ω–¥–µ–∫—Å–∞–º–∏:
- –ü–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: **< 10ms** ‚ö° (–≤ 50-200 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–Ω—è: **< 5ms** ‚ö° (–≤ 20-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: **< 50ms** ‚ö° (–≤ 20-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)

---

## üíæ –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä –ë–î

–ò–Ω–¥–µ–∫—Å—ã –∑–∞–Ω–∏–º–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ:

| –¢–∞–±–ª–∏—Ü–∞ | –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö | –†–∞–∑–º–µ—Ä –∏–Ω–¥–µ–∫—Å–æ–≤ | –ò—Ç–æ–≥–æ |
|---------|---------------|-----------------|-------|
| users | 1 KB/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | +0.5 KB | 1.5 KB |
| challenges | 2 KB/—á–µ–ª–ª–µ–Ω–¥–∂ | +1 KB | 3 KB |
| user_challenges | 500 bytes/–∑–∞–ø–∏—Å—å | +1 KB | 1.5 KB |
| completed_days | 50 bytes/–¥–µ–Ω—å | +100 bytes | 150 bytes |
| payments | 1 KB/–ø–ª–∞—Ç–µ–∂ | +0.5 KB | 1.5 KB |

**–ò—Ç–æ–≥–æ:** –ò–Ω–¥–µ–∫—Å—ã —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –ë–î –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ **50-100%**, –Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

**–î–ª—è 10,000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –î–∞–Ω–Ω—ã–µ: ~50 MB
- –ò–Ω–¥–µ–∫—Å—ã: ~30 MB
- **–ò—Ç–æ–≥–æ: ~80 MB** (–≤–º–µ—Å—Ç–æ 50 MB –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤)**

–≠—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ, —É—á–∏—Ç—ã–≤–∞—è —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 50-200 —Ä–∞–∑!

---

## ‚ö†Ô∏è –í–ª–∏—è–Ω–∏–µ –Ω–∞ INSERT/UPDATE

–ò–Ω–¥–µ–∫—Å—ã –Ω–µ–º–Ω–æ–≥–æ –∑–∞–º–µ–¥–ª—è—é—Ç –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö:

- **INSERT:** +5-10% –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ–∑–∞–º–µ—Ç–Ω–æ)
- **UPDATE:** +5-15% –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ–∑–∞–º–µ—Ç–Ω–æ)
- **DELETE:** +10-20% –≤—Ä–µ–º–µ–Ω–∏ (–Ω–µ–∑–∞–º–µ—Ç–Ω–æ)

**–ù–æ —ç—Ç–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è:**
- SELECT –∑–∞–ø—Ä–æ—Å—ã –≤ 50-200 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- –õ—É—á—à–∏–π UX (–º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

## ‚úÖ –í—ã–≤–æ–¥

**–í—Å–µ –∏–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ä–∞–∑—É - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

–ü–æ—á–µ–º—É:
1. ‚úÖ –ù–µ –∑–∞–º–µ–¥–ª—è—é—Ç —Ä–∞–±–æ—Ç—É –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (–¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ)
2. ‚úÖ –°—Ä–∞–∑—É –≥–æ—Ç–æ–≤—ã –∫ —Ä–æ—Å—Ç—É
3. ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ
4. ‚úÖ –£–ª—É—á—à–∞—é—Ç UX –¥–∞–∂–µ –Ω–∞ —Å—Ç–∞—Ä—Ç–µ
5. ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è production –ë–î

**–ù–∏–∫–∞–∫–∏—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤!** –¢–æ–ª—å–∫–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞.

---

## üìù –ß—Ç–æ –ù–ï –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –±–∞–∑–æ–≤—É—é —Å—Ö–µ–º—É

–≠—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª—É—á—à–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–∑–∂–µ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∞):

- ‚ùå –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥—ã (–Ω—É–∂–Ω—ã –ø—Ä–∏ 10K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚ùå –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω—É–∂–Ω—ã –ø—Ä–∏ 10K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚ùå –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω—É–∂–Ω—ã –ø—Ä–∏ 100K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- ‚ùå –ê—Ä—Ö–∏–≤–∞—Ü–∏—è (–Ω—É–∂–Ω—ã –ø—Ä–∏ 100K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

–û–Ω–∏ –≤ —Ñ–∞–π–ª–µ `scalability-improvements.sql` –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## üéØ –ò—Ç–æ–≥

**–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω–¥–µ–∫—Å—ã —É–∂–µ –≤ –±–∞–∑–æ–≤–æ–π —Å—Ö–µ–º–µ!**

–í–∞—à–∞ –ë–î –≥–æ—Ç–æ–≤–∞ –∫:
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç–µ —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –¥–æ 100K –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ù–∏—á–µ–≥–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!** üöÄ
